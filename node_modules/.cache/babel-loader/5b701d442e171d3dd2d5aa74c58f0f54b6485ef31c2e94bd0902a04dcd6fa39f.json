{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useGoogleAuth = void 0;\nvar react_1 = require(\"react\");\nvar GApiProvider_1 = require(\"./GApiProvider\");\n/**\n * A declarative wrapper around the `GoogleAuth` object described here {@link https://developers.google.com/identity/sign-in/web/reference#authentication}.\n *\n * This hook manages loading the `GoogleAuth` object (by calling `gapi.auth2.init`).\n * This hook also listens for changes to the signedIn state and updates the return value.\n */\nvar useGoogleAuth = function () {\n  var _a;\n  var context = GApiProvider_1.useGApiContext();\n  var _b = react_1.useState(null),\n    googleAuth = _b[0],\n    setGoogleAuth = _b[1];\n  var _c = react_1.useState((_a = googleAuth === null || googleAuth === void 0 ? void 0 : googleAuth.isSignedIn.get()) !== null && _a !== void 0 ? _a : false),\n    isSignedIn = _c[0],\n    setIsSignedIn = _c[1];\n  var _d = react_1.useState(null),\n    error = _d[0],\n    setError = _d[1];\n  if (!context) {\n    throw Error(\"Must use `useGoogleAuth` inside of `GoogleAuthProvider`\");\n  }\n  var clientConfig = context.clientConfig,\n    isAuth2Loaded = context.isAuth2Loaded;\n  // Initialize `GoogleAuth` object\n  react_1.useEffect(function () {\n    if (isAuth2Loaded && !googleAuth) {\n      gapi.auth2.init(clientConfig).then(function (googleAuth) {\n        return setGoogleAuth(googleAuth);\n      }, function (e) {\n        return setError(Error(e.error + \": \" + e.details));\n      });\n    }\n  }, [isAuth2Loaded, clientConfig, googleAuth]);\n  // Listen for changes in the current user's sign-in state.\n  react_1.useEffect(function () {\n    if (isAuth2Loaded && googleAuth) {\n      try {\n        googleAuth.isSignedIn.listen(function (signedIn) {\n          return setIsSignedIn(signedIn);\n        });\n      } catch (e) {\n        setError(e);\n      }\n    }\n  }, [isAuth2Loaded, googleAuth]);\n  return {\n    isSignedIn: isSignedIn,\n    googleAuth: googleAuth,\n    error: context.error || error\n  };\n};\nexports.useGoogleAuth = useGoogleAuth;","map":{"version":3,"names":["Object","defineProperty","exports","value","useGoogleAuth","react_1","require","GApiProvider_1","_a","context","useGApiContext","_b","useState","googleAuth","setGoogleAuth","_c","isSignedIn","get","setIsSignedIn","_d","error","setError","Error","clientConfig","isAuth2Loaded","useEffect","gapi","auth2","init","then","e","details","listen","signedIn"],"sources":["/Users/david/Documents/GitHub/web-api/client/node_modules/react-gapi-auth2/dist/useGoogleAuth.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useGoogleAuth = void 0;\nvar react_1 = require(\"react\");\nvar GApiProvider_1 = require(\"./GApiProvider\");\n/**\n * A declarative wrapper around the `GoogleAuth` object described here {@link https://developers.google.com/identity/sign-in/web/reference#authentication}.\n *\n * This hook manages loading the `GoogleAuth` object (by calling `gapi.auth2.init`).\n * This hook also listens for changes to the signedIn state and updates the return value.\n */\nvar useGoogleAuth = function () {\n    var _a;\n    var context = GApiProvider_1.useGApiContext();\n    var _b = react_1.useState(null), googleAuth = _b[0], setGoogleAuth = _b[1];\n    var _c = react_1.useState((_a = googleAuth === null || googleAuth === void 0 ? void 0 : googleAuth.isSignedIn.get()) !== null && _a !== void 0 ? _a : false), isSignedIn = _c[0], setIsSignedIn = _c[1];\n    var _d = react_1.useState(null), error = _d[0], setError = _d[1];\n    if (!context) {\n        throw Error(\"Must use `useGoogleAuth` inside of `GoogleAuthProvider`\");\n    }\n    var clientConfig = context.clientConfig, isAuth2Loaded = context.isAuth2Loaded;\n    // Initialize `GoogleAuth` object\n    react_1.useEffect(function () {\n        if (isAuth2Loaded && !googleAuth) {\n            gapi.auth2.init(clientConfig).then(function (googleAuth) { return setGoogleAuth(googleAuth); }, function (e) { return setError(Error(e.error + \": \" + e.details)); });\n        }\n    }, [isAuth2Loaded, clientConfig, googleAuth]);\n    // Listen for changes in the current user's sign-in state.\n    react_1.useEffect(function () {\n        if (isAuth2Loaded && googleAuth) {\n            try {\n                googleAuth.isSignedIn.listen(function (signedIn) { return setIsSignedIn(signedIn); });\n            }\n            catch (e) {\n                setError(e);\n            }\n        }\n    }, [isAuth2Loaded, googleAuth]);\n    return {\n        isSignedIn: isSignedIn,\n        googleAuth: googleAuth,\n        error: context.error || error,\n    };\n};\nexports.useGoogleAuth = useGoogleAuth;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,aAAa,GAAG,KAAK,CAAC;AAC9B,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAO,CAAC;AAC9B,IAAIC,cAAc,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,IAAIF,aAAa,GAAG,SAAAA,CAAA,EAAY;EAC5B,IAAII,EAAE;EACN,IAAIC,OAAO,GAAGF,cAAc,CAACG,cAAc,CAAC,CAAC;EAC7C,IAAIC,EAAE,GAAGN,OAAO,CAACO,QAAQ,CAAC,IAAI,CAAC;IAAEC,UAAU,GAAGF,EAAE,CAAC,CAAC,CAAC;IAAEG,aAAa,GAAGH,EAAE,CAAC,CAAC,CAAC;EAC1E,IAAII,EAAE,GAAGV,OAAO,CAACO,QAAQ,CAAC,CAACJ,EAAE,GAAGK,UAAU,KAAK,IAAI,IAAIA,UAAU,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACG,UAAU,CAACC,GAAG,CAAC,CAAC,MAAM,IAAI,IAAIT,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,KAAK,CAAC;IAAEQ,UAAU,GAAGD,EAAE,CAAC,CAAC,CAAC;IAAEG,aAAa,GAAGH,EAAE,CAAC,CAAC,CAAC;EACvM,IAAII,EAAE,GAAGd,OAAO,CAACO,QAAQ,CAAC,IAAI,CAAC;IAAEQ,KAAK,GAAGD,EAAE,CAAC,CAAC,CAAC;IAAEE,QAAQ,GAAGF,EAAE,CAAC,CAAC,CAAC;EAChE,IAAI,CAACV,OAAO,EAAE;IACV,MAAMa,KAAK,CAAC,yDAAyD,CAAC;EAC1E;EACA,IAAIC,YAAY,GAAGd,OAAO,CAACc,YAAY;IAAEC,aAAa,GAAGf,OAAO,CAACe,aAAa;EAC9E;EACAnB,OAAO,CAACoB,SAAS,CAAC,YAAY;IAC1B,IAAID,aAAa,IAAI,CAACX,UAAU,EAAE;MAC9Ba,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,YAAY,CAAC,CAACM,IAAI,CAAC,UAAUhB,UAAU,EAAE;QAAE,OAAOC,aAAa,CAACD,UAAU,CAAC;MAAE,CAAC,EAAE,UAAUiB,CAAC,EAAE;QAAE,OAAOT,QAAQ,CAACC,KAAK,CAACQ,CAAC,CAACV,KAAK,GAAG,IAAI,GAAGU,CAAC,CAACC,OAAO,CAAC,CAAC;MAAE,CAAC,CAAC;IACzK;EACJ,CAAC,EAAE,CAACP,aAAa,EAAED,YAAY,EAAEV,UAAU,CAAC,CAAC;EAC7C;EACAR,OAAO,CAACoB,SAAS,CAAC,YAAY;IAC1B,IAAID,aAAa,IAAIX,UAAU,EAAE;MAC7B,IAAI;QACAA,UAAU,CAACG,UAAU,CAACgB,MAAM,CAAC,UAAUC,QAAQ,EAAE;UAAE,OAAOf,aAAa,CAACe,QAAQ,CAAC;QAAE,CAAC,CAAC;MACzF,CAAC,CACD,OAAOH,CAAC,EAAE;QACNT,QAAQ,CAACS,CAAC,CAAC;MACf;IACJ;EACJ,CAAC,EAAE,CAACN,aAAa,EAAEX,UAAU,CAAC,CAAC;EAC/B,OAAO;IACHG,UAAU,EAAEA,UAAU;IACtBH,UAAU,EAAEA,UAAU;IACtBO,KAAK,EAAEX,OAAO,CAACW,KAAK,IAAIA;EAC5B,CAAC;AACL,CAAC;AACDlB,OAAO,CAACE,aAAa,GAAGA,aAAa"},"metadata":{},"sourceType":"script","externalDependencies":[]}